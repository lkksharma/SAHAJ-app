{"version":3,"sources":["HTMLTable.tsx"],"names":["React","useMemo","useRef","useLayoutEffect","useCallback","PropTypes","Platform","StyleSheet","Dimensions","LayoutAnimation","Animated","useAutoheight","HandleHTMLDimensionsFeature","HandleLinkPressFeature","useWebshell","linkPressTargetToOnDOMLinkPressArgs","cssRulesFromSpecs","defaultTableStylesSpecs","styles","create","container","flex","overflow","defaultInsets","top","bottom","left","right","DEFAULT_TRANSITION_DURATION","animateNextFrames","duration","configureNext","update","type","Types","easeInEaseOut","tableStylePropTypeSpec","linkColor","string","fontFamily","fontSizePx","number","tdBorderColor","thBorderColor","trOddBackground","trOddColor","trEvenBackground","trEvenColor","rowsBorderWidthPx","columnsBorderWidthPx","outerBorderColor","outerBorderWidthPx","cellPaddingEm","fitContainerWidth","bool","fitContainerHeight","selectableText","thEvenBackground","thEvenColor","thOddBackground","thOddColor","findHeight","computeContainerHeight","computeHeuristicContentHeight","contentHeight","stats","defaultComputeHeuristicContentHeight","tableStats","numOfChars","numOfRows","width","get","charsPerLine","lineHeight","approxNumOfLines","Math","floor","max","defaultComputeContainerHeight","state","useAnimatedAutoheight","animationType","animationDuration","webViewProps","numOfColumns","animatedHeight","Value","current","autoheightWebshellProps","contentSize","syncState","webshellProps","resetHeightOnViewportWidthChange","containerHeight","height","oldContainerHeightRef","containerStyle","interpolate","inputRange","outputRange","Number","isNaN","undefined","timing","toValue","useNativeDriver","start","useSource","tableStyleSpecs","cssRules","sourceBaseUrl","html","maxScale","injectedHtml","styleSpecs","tableCssStyle","baseUrl","features","HTMLTable","WebView","userWebViewProps","style","onLinkPress","htmlAttribs","onDOMLinkPress","event","apply","scalesPageToFit","select","android","ios","automaticallyAdjustContentInsets","scrollEnabled","contentInset","source","webshellDebug","props","createElement","propTypes","isRequired","oneOf","func","elementType","any","shape","object","displayMode","defaultProps","Object","defineProperty","value"],"mappings":"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","sourcesContent":["import React, { useMemo, useRef, useLayoutEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Platform,\n  StyleSheet,\n  Dimensions,\n  LayoutAnimation,\n  Animated\n} from 'react-native';\nimport {\n  useAutoheight,\n  HandleHTMLDimensionsFeature,\n  HandleLinkPressFeature,\n  MinimalWebViewProps,\n  LinkPressTarget,\n  useWebshell\n} from '@formidable-webview/webshell';\nimport { linkPressTargetToOnDOMLinkPressArgs } from '@native-html/plugins-core';\nimport { cssRulesFromSpecs, defaultTableStylesSpecs } from './css-rules';\nimport {\n  TableStyleSpecs,\n  HTMLTableProps,\n  TableContentHeightState,\n  HTMLTableStats\n} from './types';\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    // See https://github.com/react-native-community/react-native-webview/issues/101\n    overflow: 'hidden'\n  }\n});\n\nconst defaultInsets = {\n  top: 0,\n  bottom: 0,\n  left: 0,\n  right: 0\n};\n\nconst DEFAULT_TRANSITION_DURATION = 120;\n\nfunction animateNextFrames(duration?: number) {\n  LayoutAnimation.configureNext({\n    duration: duration || DEFAULT_TRANSITION_DURATION,\n    update: {\n      type: LayoutAnimation.Types.easeInEaseOut\n    }\n  });\n}\n\nconst tableStylePropTypeSpec: Record<keyof TableStyleSpecs, any> = {\n  linkColor: PropTypes.string,\n  fontFamily: PropTypes.string,\n  fontSizePx: PropTypes.number,\n  tdBorderColor: PropTypes.string,\n  thBorderColor: PropTypes.string,\n  trOddBackground: PropTypes.string,\n  trOddColor: PropTypes.string,\n  trEvenBackground: PropTypes.string,\n  trEvenColor: PropTypes.string,\n  rowsBorderWidthPx: PropTypes.number,\n  columnsBorderWidthPx: PropTypes.number,\n  outerBorderColor: PropTypes.string,\n  outerBorderWidthPx: PropTypes.number,\n  cellPaddingEm: PropTypes.number,\n  fitContainerWidth: PropTypes.bool,\n  fitContainerHeight: PropTypes.bool,\n  selectableText: PropTypes.bool,\n  thEvenBackground: PropTypes.string,\n  thEvenColor: PropTypes.string,\n  thOddBackground: PropTypes.string,\n  thOddColor: PropTypes.string\n};\n\nfunction findHeight({\n  computeContainerHeight,\n  computeHeuristicContentHeight,\n  contentHeight,\n  ...stats\n}: {\n  computeContainerHeight: (state: TableContentHeightState) => number | null;\n  computeHeuristicContentHeight: (tableStats: HTMLTableStats) => number;\n  contentHeight: number | null;\n} & HTMLTableStats) {\n  if (typeof contentHeight === 'number') {\n    return computeContainerHeight({\n      type: 'accurate',\n      contentHeight: contentHeight\n    });\n  }\n  return computeContainerHeight({\n    type: 'heuristic',\n    contentHeight: computeHeuristicContentHeight(stats)\n  });\n}\n\nfunction defaultComputeHeuristicContentHeight(tableStats: HTMLTableStats) {\n  const { numOfChars, numOfRows } = tableStats;\n  const width = Dimensions.get('window').width;\n  const charsPerLine = (30 * width) / 400;\n  const lineHeight = 20;\n  const approxNumOfLines = Math.floor(numOfChars / charsPerLine);\n  return Math.max(approxNumOfLines, numOfRows) * lineHeight;\n}\n\nfunction defaultComputeContainerHeight(state: TableContentHeightState) {\n  return state.contentHeight;\n}\n\nfunction useAnimatedAutoheight<WVP extends MinimalWebViewProps>({\n  computeContainerHeight,\n  computeHeuristicContentHeight,\n  animationType,\n  animationDuration,\n  webViewProps,\n  numOfChars,\n  numOfColumns,\n  numOfRows\n}: Pick<\n  HTMLTableProps,\n  | 'animationType'\n  | 'animationDuration'\n  | 'numOfChars'\n  | 'numOfColumns'\n  | 'numOfRows'\n> & { webViewProps: any } & Required<\n    Pick<\n      HTMLTableProps,\n      'computeContainerHeight' | 'computeHeuristicContentHeight'\n    >\n  >) {\n  const animatedHeight = useRef(new Animated.Value(0)).current;\n  const { autoheightWebshellProps, contentSize, syncState } =\n    useAutoheight<WVP>({\n      webshellProps: webViewProps as any,\n      resetHeightOnViewportWidthChange: false\n    });\n  const containerHeight = useMemo(\n    () =>\n      findHeight({\n        computeContainerHeight,\n        computeHeuristicContentHeight,\n        contentHeight: syncState === 'synced' ? contentSize.height || 0 : null,\n        numOfChars,\n        numOfColumns,\n        numOfRows\n      }),\n    [\n      computeContainerHeight,\n      computeHeuristicContentHeight,\n      contentSize.height,\n      syncState,\n      numOfChars,\n      numOfColumns,\n      numOfRows\n    ]\n  );\n  const oldContainerHeightRef = useRef<number | null>(containerHeight);\n  const containerStyle: { height: any } = useMemo(\n    () =>\n      animationType === 'animated' && containerHeight !== null\n        ? {\n            height: animatedHeight.interpolate({\n              inputRange: [0, 1],\n              outputRange: [\n                oldContainerHeightRef.current || containerHeight,\n                containerHeight\n              ]\n            })\n          }\n        : {\n            height:\n              !containerHeight || Number.isNaN(containerHeight)\n                ? undefined\n                : containerHeight\n          },\n    [animatedHeight, animationType, containerHeight]\n  );\n  useLayoutEffect(() => {\n    if (oldContainerHeightRef.current !== containerHeight) {\n      oldContainerHeightRef.current = containerHeight;\n      if (animationType === 'animated') {\n        Animated.timing(animatedHeight, {\n          toValue: 1,\n          duration: animationDuration,\n          useNativeDriver: false\n        }).start();\n      } else if (animationType === 'layout') {\n        animateNextFrames(animationDuration);\n      }\n    }\n  }, [containerHeight, animationDuration, animationType, animatedHeight]);\n  return {\n    containerStyle,\n    autoheightWebshellProps\n  };\n}\n\nfunction useSource({\n  tableStyleSpecs,\n  cssRules,\n  sourceBaseUrl,\n  html,\n  maxScale\n}: Pick<\n  HTMLTableProps,\n  'html' | 'cssRules' | 'tableStyleSpecs' | 'sourceBaseUrl' | 'maxScale'\n>) {\n  const injectedHtml = useMemo(() => {\n    const styleSpecs = tableStyleSpecs\n      ? {\n          ...defaultTableStylesSpecs,\n          ...tableStyleSpecs\n        }\n      : defaultTableStylesSpecs;\n    const tableCssStyle =\n      typeof cssRules === 'string' ? cssRules : cssRulesFromSpecs(styleSpecs);\n    return `\n  <!DOCTYPE html>\n  <html>\n  <head>\n    <meta name=\"viewport\" content=\"width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=${Math.max(\n      1,\n      typeof maxScale !== 'number' || Number.isNaN(maxScale) ? 1 : maxScale\n    )}\">\n    <title>Table</title>\n    <style>${tableCssStyle}</style>\n  </head>\n  <body>${html}</body>\n  </html>\n        `;\n  }, [tableStyleSpecs, cssRules, html, maxScale]);\n  return useMemo(\n    () => ({\n      html: injectedHtml,\n      baseUrl: sourceBaseUrl ?? undefined\n    }),\n    [injectedHtml, sourceBaseUrl]\n  );\n}\n\nconst features = [\n  new HandleLinkPressFeature(),\n  new HandleHTMLDimensionsFeature()\n];\n\n/**\n * A component capable of rendering a html string which root tag is a table\n * tag. This component should not be used directly, except with custom\n * renderers.\n *\n * @public\n */\nexport const HTMLTable = function HTMLTable({\n  WebView,\n  tableStyleSpecs,\n  cssRules,\n  html,\n  sourceBaseUrl,\n  animationType,\n  computeHeuristicContentHeight = defaultComputeHeuristicContentHeight,\n  computeContainerHeight = defaultComputeContainerHeight,\n  webViewProps: userWebViewProps,\n  style,\n  onLinkPress,\n  animationDuration,\n  htmlAttribs,\n  maxScale,\n  ...stats\n}: HTMLTableProps) {\n  const onDOMLinkPress = useCallback(\n    (event: LinkPressTarget) =>\n      onLinkPress?.apply(null, linkPressTargetToOnDOMLinkPressArgs(event)),\n    [onLinkPress]\n  );\n  const { autoheightWebshellProps, containerStyle } = useAnimatedAutoheight({\n    ...stats,\n    animationDuration,\n    animationType,\n    computeContainerHeight,\n    computeHeuristicContentHeight,\n    webViewProps: {\n      scalesPageToFit: Platform.select({ android: false, ios: undefined }),\n      automaticallyAdjustContentInsets: false,\n      scrollEnabled: true,\n      contentInset: defaultInsets,\n      ...userWebViewProps,\n      onDOMLinkPress,\n      source: useSource({\n        html,\n        cssRules,\n        sourceBaseUrl,\n        tableStyleSpecs\n      }),\n      webshellDebug: false\n    }\n  });\n  const webViewProps = useWebshell({\n    features,\n    props: autoheightWebshellProps\n  });\n  return (\n    <Animated.View\n      testID=\"html-table-container\"\n      style={[containerStyle, styles.container, style]}>\n      {React.createElement(WebView, webViewProps)}\n    </Animated.View>\n  );\n};\n\nconst propTypes: Record<keyof HTMLTableProps, any> = {\n  animationDuration: PropTypes.number.isRequired,\n  animationType: PropTypes.oneOf(['none', 'animated', 'layout']),\n  computeContainerHeight: PropTypes.func.isRequired,\n  computeHeuristicContentHeight: PropTypes.func.isRequired,\n  html: PropTypes.string.isRequired,\n  numOfChars: PropTypes.number.isRequired,\n  numOfColumns: PropTypes.number.isRequired,\n  numOfRows: PropTypes.number.isRequired,\n  WebView: PropTypes.elementType.isRequired,\n  onLinkPress: PropTypes.func,\n  style: PropTypes.any,\n  tableStyleSpecs: PropTypes.shape(tableStylePropTypeSpec),\n  cssRules: PropTypes.string,\n  webViewProps: PropTypes.object,\n  sourceBaseUrl: PropTypes.string,\n  maxScale: PropTypes.number.isRequired,\n  htmlAttribs: PropTypes.any,\n  displayMode: PropTypes.oneOf(['flex', 'expand'])\n};\n\nconst defaultProps = {\n  animationDuration: DEFAULT_TRANSITION_DURATION,\n  animationType: 'animated',\n  computeHeuristicContentHeight: defaultComputeHeuristicContentHeight,\n  computeContainerHeight: defaultComputeContainerHeight,\n  maxScale: 1\n};\n\nObject.defineProperty(HTMLTable, 'propTypes', {\n  value: propTypes\n});\n\nObject.defineProperty(HTMLTable, 'defaultProps', {\n  value: defaultProps\n});\n"]}