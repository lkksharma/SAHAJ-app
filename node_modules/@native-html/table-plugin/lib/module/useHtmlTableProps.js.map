{"version":3,"sources":["useHtmlTableProps.ts"],"names":["Dimensions","useSharedProps","useDocumentMetadata","useRendererProps","useContentWidth","extractHtmlAndStatsFromTableDomNode","useHtmlTableProps","style","tnode","tableConfig","WebView","defaultWebViewProps","computeEmbeddedMaxWidth","contentWidth","globalTableConfig","onPress","onLinkPress","resolvedConfig","webViewProps","resolvedContentWidth","get","width","documentBaseUrl","baseUrl","availableWidth","call","html","stats","domNode","displayMode","composedStyles","maxWidth","sourceBaseUrl"],"mappings":"AAAA,SAASA,UAAT,QAA2B,cAA3B;AACA,SAEEC,cAFF,EAGEC,mBAHF,EAIEC,gBAJF,EAKEC,eALF,QAMO,0BANP;AAOA,OAAOC,mCAAP,MAAgD,uCAAhD;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,iBAAT,CACb;AAAEC,EAAAA,KAAF;AAASC,EAAAA;AAAT,CADa,EAEbC,WAFa,EAGG;AAChB,QAAM;AAAEC,IAAAA,OAAF;AAAWC,IAAAA,mBAAX;AAAgCC,IAAAA;AAAhC,MACJX,cAAc,EADhB;AAEA,QAAMY,YAAY,GAAGT,eAAe,EAApC;AACA,QAAMU,iBAAiB,GAAGX,gBAAgB,CAAC,OAAD,CAA1C;AACA,QAAM;AAAEY,IAAAA,OAAO,EAAEC;AAAX,MAA2Bb,gBAAgB,CAAC,GAAD,CAAjD;AACA,QAAMc,cAA2B,GAAG,EAClC,GAAGH,iBAD+B;AAElC,OAAGL,WAF+B;AAGlCS,IAAAA,YAAY,EAAE,EACZ,GAAGP,mBADS;AAEZ,UAAGG,iBAAH,aAAGA,iBAAH,uBAAGA,iBAAiB,CAAEI,YAAtB,CAFY;AAGZ,UAAGT,WAAH,aAAGA,WAAH,uBAAGA,WAAW,CAAES,YAAhB;AAHY;AAHoB,GAApC;AASA,QAAMC,oBAAoB,GACxB,OAAON,YAAP,KAAwB,QAAxB,GACIA,YADJ,GAEIb,UAAU,CAACoB,GAAX,CAAe,QAAf,EAAyBC,KAH/B;AAIA,QAAMC,eAAe,GAAGpB,mBAAmB,GAAGqB,OAA9C;AACA,QAAMC,cAAc,GAClB,CAAAZ,uBAAuB,SAAvB,IAAAA,uBAAuB,WAAvB,YAAAA,uBAAuB,CAAEa,IAAzB,CAA8B,IAA9B,EAAoCN,oBAApC,EAA0D,OAA1D,MACAA,oBAFF;AAGA,QAAM;AAAEO,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAkBtB,mCAAmC,CAACG,KAAK,CAACoB,OAAP,CAA3D;AACA,QAAMC,WAAW,GAAGZ,cAAc,CAACY,WAAf,IAA8B,QAAlD;AACA,QAAMC,cAAc,GAAG,CACrBvB,KADqB,EAErBsB,WAAW,KAAK,QAAhB,GACI;AAAER,IAAAA,KAAK,EAAEG;AAAT,GADJ,GAEIK,WAAW,KAAK,UAAhB,GACA;AAAEE,IAAAA,QAAQ,EAAEP;AAAZ,GADA,GAEA,IANiB,CAAvB;AASA,SAAO,EACL,GAAGP,cADE;AAEL,OAAGU,KAFE;AAGLD,IAAAA,IAHK;AAILM,IAAAA,aAAa,EAAEV,eAJV;AAKLf,IAAAA,KAAK,EAAEuB,cALF;AAMLd,IAAAA,WANK;AAOLN,IAAAA;AAPK,GAAP;AASD","sourcesContent":["import { Dimensions } from 'react-native';\nimport {\n  CustomRendererProps,\n  useSharedProps,\n  useDocumentMetadata,\n  useRendererProps,\n  useContentWidth\n} from 'react-native-render-html';\nimport extractHtmlAndStatsFromTableDomNode from './extractHtmlAndStatsFromTableDomNode';\nimport { HTMLTableProps, TableConfig } from './types';\nimport type { TBlock } from '@native-html/transient-render-engine';\n\n/**\n * Extract props for the HTMLTable component from renderer function arguments.\n * This function is especially usefull for custom table renderers.\n *\n * @param props - The props of a custom block renderer.\n * @param tableConfig - Override config options.\n *\n * @public\n */\nexport default function useHtmlTableProps(\n  { style, tnode }: CustomRendererProps<TBlock>,\n  tableConfig?: TableConfig\n): HTMLTableProps {\n  const { WebView, defaultWebViewProps, computeEmbeddedMaxWidth } =\n    useSharedProps();\n  const contentWidth = useContentWidth();\n  const globalTableConfig = useRendererProps('table');\n  const { onPress: onLinkPress } = useRendererProps('a');\n  const resolvedConfig: TableConfig = {\n    ...globalTableConfig,\n    ...tableConfig,\n    webViewProps: {\n      ...defaultWebViewProps,\n      ...globalTableConfig?.webViewProps,\n      ...tableConfig?.webViewProps\n    }\n  };\n  const resolvedContentWidth =\n    typeof contentWidth === 'number'\n      ? contentWidth\n      : Dimensions.get('window').width;\n  const documentBaseUrl = useDocumentMetadata().baseUrl;\n  const availableWidth =\n    computeEmbeddedMaxWidth?.call(null, resolvedContentWidth, 'table') ||\n    resolvedContentWidth;\n  const { html, stats } = extractHtmlAndStatsFromTableDomNode(tnode.domNode);\n  const displayMode = resolvedConfig.displayMode || 'normal';\n  const composedStyles = [\n    style,\n    displayMode === 'expand'\n      ? { width: availableWidth }\n      : displayMode === 'embedded'\n      ? { maxWidth: availableWidth }\n      : null\n  ];\n\n  return {\n    ...resolvedConfig,\n    ...stats,\n    html,\n    sourceBaseUrl: documentBaseUrl,\n    style: composedStyles,\n    onLinkPress,\n    WebView\n  };\n}\n"]}