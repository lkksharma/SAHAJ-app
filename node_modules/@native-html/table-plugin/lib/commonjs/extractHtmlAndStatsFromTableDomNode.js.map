{"version":3,"sources":["extractHtmlAndStatsFromTableDomNode.ts"],"names":["extractHtmlAndStatsFromTableDomNode","domNode","stats","numOfChars","numOfColumns","numOfRows","innerHTML","node","_depth","html","tagName","length"],"mappings":";;;;;;;AAAA;;AACA;;AAIe,SAASA,mCAAT,CACbC,OADa,EAEb;AACA,MAAIC,KAAqB,GAAG;AAC1BC,IAAAA,UAAU,EAAE,CADc;AAE1BC,IAAAA,YAAY,EAAE,CAFY;AAG1BC,IAAAA,SAAS,EAAE;AAHe,GAA5B;AAKA,QAAMC,SAAS,GAAG,gDAAoBL,OAApB,EAA6B,CAACM,IAAD,EAAOC,MAAP,EAAeC,IAAf,KAAwB;AACrE,QAAI,yCAAaF,IAAb,CAAJ,EAAwB;AACtB,UAAIA,IAAI,CAACG,OAAL,KAAiB,IAArB,EAA2B;AACzBR,QAAAA,KAAK,CAACG,SAAN,IAAmB,CAAnB;AACD,OAFD,MAEO,IACL,CAACE,IAAI,CAACG,OAAL,KAAiB,IAAjB,IAAyBH,IAAI,CAACG,OAAL,KAAiB,IAA3C,KACAR,KAAK,CAACG,SAAN,KAAoB,CAFf,EAGL;AACAH,QAAAA,KAAK,CAACE,YAAN,IAAsB,CAAtB;AACD;AACF,KATD,MASO,IAAI,sCAAUG,IAAV,CAAJ,EAAqB;AAC1BL,MAAAA,KAAK,CAACC,UAAN,IAAoBM,IAAI,CAACE,MAAzB;AACD;AACF,GAbiB,CAAlB;AAcA,SAAO;AACLF,IAAAA,IAAI,EAAEH,SADD;AAELJ,IAAAA;AAFK,GAAP;AAID","sourcesContent":["import { domNodeToHTMLString } from 'react-native-render-html';\nimport { isDomElement, isDomText } from '@native-html/transient-render-engine';\nimport { HTMLTableStats } from './types';\nimport type { Node } from 'domhandler';\n\nexport default function extractHtmlAndStatsFromTableDomNode(\n  domNode: Node | null\n) {\n  let stats: HTMLTableStats = {\n    numOfChars: 0,\n    numOfColumns: 0,\n    numOfRows: 0\n  };\n  const innerHTML = domNodeToHTMLString(domNode, (node, _depth, html) => {\n    if (isDomElement(node)) {\n      if (node.tagName === 'tr') {\n        stats.numOfRows += 1;\n      } else if (\n        (node.tagName === 'td' || node.tagName === 'th') &&\n        stats.numOfRows === 0\n      ) {\n        stats.numOfColumns += 1;\n      }\n    } else if (isDomText(node)) {\n      stats.numOfChars += html.length;\n    }\n  });\n  return {\n    html: innerHTML,\n    stats\n  };\n}\n"]}